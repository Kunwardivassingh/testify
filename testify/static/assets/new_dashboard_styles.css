/* General Body and Layout */
html, body {
    height: 100%;
    margin: 0;
    background-color: #1a1c2c;
    color: #e0e0e0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    overflow: hidden;
}

.dashboard-container {
    display: flex;
    flex-direction: column;
    height: 100vh;
}

/* --- Header & Profile Dropdown --- */
.header {
    flex-shrink: 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 30px;
    background-color: #27293d;
    border-bottom: 1px solid #444;
}
.header h1 { font-size: 24px; color: #ffffff; }
.header-icons { display: flex; align-items: center; gap: 25px; color: #a0a0a0; }
.header-icons .fas { font-size: 20px; cursor: pointer; }
.profile-dropdown { position: relative; }
.dropdown-menu {
    position: absolute;
    top: 40px; right: 0;
    background-color: #34374e;
    border: 1px solid #444;
    border-radius: 8px;
    width: 150px; z-index: 1000;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}
.dropdown-menu a { display: block; padding: 10px 15px; color: #e0e0e0; text-decoration: none; }
.dropdown-menu a:hover { background-color: #0d6efd; }
.dropdown-menu hr { border-color: #444; margin: 5px 0; }

/* --- Main Content Layout (FIXED SIDEBAR + SCROLLING CONTENT) --- */
.main-content {
    display: flex;
    flex-grow: 1;
    overflow: hidden;
}

.filters-sidebar {
    flex: 0 0 25%;
    max-width: 300px;
    padding: 20px;
    background-color: #1a1c2c;
    overflow-y: auto;
    border-right: 1px solid #444;
}
.dashboard-content {
    flex-grow: 1;
    padding: 20px;
    overflow-y: auto;
    min-height: 0; /* THE CRITICAL FIX: Prevents flex children from overflowing */
}

/* --- Responsive Grid & Card Layout --- */
.row {
    display: flex;
    flex-wrap: wrap;
    margin: -10px;
    margin-bottom: 20px;
}
[class*="col-"], .col {
    padding: 10px;
    box-sizing: border-box;
}

/* --- Card Styling for Charts and KPIs --- */
.card {
    background-color: #27293d;
    padding: 20px;
    border-radius: 8px;
    height: 100%;
    border: none;
    display: flex;
    flex-direction: column;
}
.kpi-card { justify-content: center;
    align-items: center; 
    text-align: center;
    color: #e0e0e0;
    border: 1px solid #444;
    margin-bottom: 20px;
    flex: 1 0 30%; /* Flex-grow, flex-shrink, and flex-basis */
    min-width: 200px; /* Minimum width for responsiveness */
    max-width: 300px; /* Maximum width for larger screens */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
.card .graph, .card .dash-table-container {
    flex-grow: 1;
}

/* --- THE DEFINITIVE TABLE SCROLLING FIX --- */
.table-wrapper {
    background-color: #27293d;
    border-radius: 8px;
    padding: 20px;
    max-height: 500px; /* Set a max height for the table container */
    overflow-y: auto; /* Enable vertical scrolling ONLY for the table */
    display: flex; /* Use flexbox to manage the inner table */
    flex-direction: column;
}
.table-wrapper .dash-table-container {
    flex-grow: 1;
}

/* --- General Styled Components --- */
.filters-sidebar h2 { font-size: 20px; border-bottom: 1px solid #444; padding-bottom: 10px; margin-top: 0; }
.filter-group { margin-bottom: 20px; }
.filter-group label { display: block; margin-bottom: 8px; font-size: 14px; color: #a0a0a0; }
#apply-filters-button { width: 100%; background-color: #0d6efd; color: white; border: none; padding: 10px; border-radius: 4px; cursor: pointer; }

/* --- Specific, Non-Conflicting Styles for Multi-Select Dropdowns --- */
.filter-group .Select-control, .filter-group .DateInput_input { background-color: #27293d !important; border: 1px solid #444 !important; }
.filter-group .Select-placeholder, .filter-group .Select-value-label { color: #a0a0a0 !important; }
.filter-group .Select-menu-outer { background-color: #34374e !important; border: 1px solid #444 !important; }
.filter-group .Select-option.is-focused { background-color: #0d6efd !important; }
.filter-group .Select--multi .Select-value { background-color: #0d6efd; color: white !important; border-radius: 4px; }
.filter-group .Select--multi .Select-value-icon { border-right: 1px solid #0b5ed7; }

.title-bar { padding: 0 10px 10px; }
.kpi-card .card-title { font-size: 14px; color: #a0a0a0; margin: 0 0 5px 0; }
.kpi-card .card-value { font-size: 28px; font-weight: 700; margin: 0; }

/* Footer and Export Buttons */
.dashboard-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 10px 0;
    border-top: 1px solid #444;
    flex-shrink: 0;
}
.footer-buttons button {
    background-color: #27293d; color: #e0e0e0; border: 1px solid #444;
    padding: 8px 16px; border-radius: 4px; cursor: pointer; margin-left: 10px;
}
.footer-buttons button:hover { background-color: #0d6efd; border-color: #0d6efd; }

/* --- Media Queries for Responsiveness --- */
@media (max-width: 992px) {
    html, body { overflow: auto; }
    .dashboard-container { height: auto; }
    .main-content { flex-direction: column; overflow: visible; }
    .filters-sidebar { width: 100%; max-width: none; height: auto; border-right: none; }
    .row > [class*="col-"] { flex: 0 0 100% !important; max-width: 100% !important; }
}
.dp-connect-section p {
    color: #6c757d;
    font-size: 14px;
    margin-bottom: 16px;
}